<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>JQ8400 MP3 Player Arduino Library: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">JQ8400 MP3 Player Arduino Library
   </div>
   <div id="projectbrief">A simple library to control a JQ8400 MP3 Player Module from an Arduino.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">JQ8400 MP3 Player Arduino Library Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Simple to use Arduino library to interface to JQ8400 (JQ8400-FL, JQ8400-TF) Mp3 Player Modules</p>
<p><b>Table of Contents</b></p>
<ul>
<li><a href="#download-install-and-example">Download, Install and Example</a></li>
<li><a href="#connecting-to-your-arduino">Connecting To Your Arduino</a><ul>
<li><a href="#for-a-softwareserial-connection">For a SoftwareSerial Connection</a><ul>
<li><a href="#softwareserial-5v-arduino-connect-as-follows">SoftwareSerial **5v** Arduino, connect as follows.</a></li>
<li><a href="#softwareserial-3v3-arduino-connect-as-follows">SoftwareSerial **3v3** Arduino, connect as follows...</a></li>
</ul>
</li>
<li><a href="#for-a-built-in-additional-hardware-serial-connection-eg-esp32">For a built in additional hardware serial connection (eg ESP32)</a><ul>
<li><a href="#built-in-additional-serial-on-5v-arduino-connect-as-follows">Built In Additional Serial on **5v** Arduino, connect as follows.</a></li>
<li><a href="#built-in-additional-serial-on-3v3-arduino-connect-as-follows">Built In Additional Serial on **3v3** Arduino, connect as follows.</a></li>
<li><a href="#example-for-esp32-using-built-in-serial2">Example for ESP32 using Built In Serial2</a></li>
<li><a href="#example-code-for-serial2">Example Code For "Serial2"</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#troubleshooting">Troubleshooting</a></li>
<li><a href="#further-documentation-and-library-reference">Further Documentation and Library Reference</a></li>
<li><a href="#jq6500-to-jq8400-breaking-changes">JQ6500 to JQ8400 Breaking Changes</a></li>
</ul>
<table class="doxtable">
<tr>
<th>JQ8400-TF </th><th>JQ8400-FL  </th></tr>
<tr>
<td><div class="image">
<img src="https://sparks.gogo.co.nz/assets/_site_/images/jq8400/P1090887.jpg" />
</div>
 </td><td><div class="image">
<img src="https://sparks.gogo.co.nz/assets/_site_/images/jq8400/P1090886.jpg" />
</div>
 </td></tr>
</table>
<h2>Download, Install and Example </h2>
<ul>
<li>Download: <a href="http://sparks.gogo.co.nz/JQ8400_Serial.zip">http://sparks.gogo.co.nz/JQ8400_Serial.zip</a></li>
<li>Open the Arduino IDE (1.6+)</li>
<li>Select the menu item Sketch &gt; Import Library &gt; Add Library</li>
<li>Choose to install the JQ8400_Serial.zip file you downloaded</li>
<li>Now you can choose File &gt; Examples &gt; <a class="el" href="class_j_q8400___serial.html">JQ8400_Serial</a> &gt; HelloWorld</li>
</ul>
<h2>Connecting To Your Arduino </h2>
<p>The <a class="el" href="class_j_q8400___serial.html">JQ8400_Serial</a> library can be configured to talk through any "Serial" port, including "SoftwareSerial", anything that is a Stream.</p>
<p>Most commonly you will use a SoftwareSerial with typical "AVR" based Arduinos that only have one hardware seral port. For Arduino's (and related, like ESP32) that have more than one hardware serial port you will typically want to use one of those instead of SoftwareSerial.</p>
<p>The most important consideration is that if your Arduino is 5 volt, you will want to put a 1k resistor on the RX pin of the JQ8400 and the Arduino's appropriate TX pin you are using.</p>
<p>Below are some examples to help you.</p>
<h3>For a SoftwareSerial Connection</h3>
<p>This is the typical setup where you have an Arduino Uno or Nano etc which only has one "Hardware" serial port and you use that to upload and communicate to the Arduino yourself, therefore we use a SoftwareSerial connection to communicate between the Arduino and the JQ8400 Module.</p>
<h4>SoftwareSerial <b>5v</b> Arduino, connect as follows.</h4>
<table class="doxtable">
<tr>
<th>JQ8400 Module </th><th>Arduino  </th></tr>
<tr>
<td>RX </td><td>through a 1K Resistor then to pin 9 </td></tr>
<tr>
<td>TX </td><td>pin 8 </td></tr>
<tr>
<td>GND (any of) </td><td>GND </td></tr>
<tr>
<td>VCC (any of) </td><td>VCC </td></tr>
</table>
<h4>SoftwareSerial <b>3v3</b> Arduino, connect as follows...</h4>
<table class="doxtable">
<tr>
<th>JQ8400 Module </th><th>Arduino  </th></tr>
<tr>
<td>RX </td><td>pin 9 </td></tr>
<tr>
<td>TX </td><td>pin 8 </td></tr>
<tr>
<td>GND (any of) </td><td>GND </td></tr>
<tr>
<td>VCC (any of) </td><td>VCC </td></tr>
</table>
<p>You can use pins other than 9 and 8 if you wish, simply set them in your code, which looks something like this... </p><pre class="fragment">#include &lt;SoftwareSerial.h&gt;
SoftwareSerial mySerial(8,9);

#include &lt;JQ8400_Serial.h&gt;
JQ8400_Serial mp3(mySerial);

void setup()
{
  mySerial.begin(9600); // We must talk to the JQ8400 at 9600
  mp3.reset();          // Reset the device (optional, recommended)
}

void loop()
{
  // You should do more interesting stuff than just this...
  mp3.next();
  while(mp3.busy()); // Wait until finished.
}
</pre><h3>For a built in additional hardware serial connection (eg ESP32)</h3>
<p>This is a typical setup where your Arduino environment has more than one "Serial", and you want to use one of those to communicate to the JQ8400, leaving the normal "Serial" free for uploading, communication to the Arduino etc...</p>
<h4>Built In Additional Serial on <b>5v</b> Arduino, connect as follows.</h4>
<table class="doxtable">
<tr>
<th>JQ8400 Module </th><th>Arduino  </th></tr>
<tr>
<td>RX </td><td>through a 1K Resistor then to appropriate TX pin </td></tr>
<tr>
<td>TX </td><td>RX pin </td></tr>
<tr>
<td>GND (any of) </td><td>GND </td></tr>
<tr>
<td>VCC (any of) </td><td>VCC </td></tr>
</table>
<h4>Built In Additional Serial on <b>3v3</b> Arduino, connect as follows.</h4>
<table class="doxtable">
<tr>
<th>JQ8400 Module </th><th>Arduino  </th></tr>
<tr>
<td>RX </td><td>appropriate TX pin </td></tr>
<tr>
<td>TX </td><td>appropriate RX pin </td></tr>
<tr>
<td>GND (any of) </td><td>GND </td></tr>
<tr>
<td>VCC (any of) </td><td>VCC </td></tr>
</table>
<h4>Example for ESP32 using Built In Serial2</h4>
<table class="doxtable">
<tr>
<th>JQ8400 Module </th><th>ESP32  </th></tr>
<tr>
<td>RX </td><td>GPIO17 </td></tr>
<tr>
<td>TX </td><td>GPIO16 </td></tr>
<tr>
<td>GND (any of) </td><td>GND </td></tr>
<tr>
<td>VCC (any of) </td><td>VCC </td></tr>
</table>
<h4>Example Code For "Serial2"</h4>
<pre class="fragment">#include &lt;JQ8400_Serial.h&gt;
JQ8400_Serial mp3(Serial2);

void setup()
{
  Serial2.begin(9600);  // We must talk to the JQ8400 at 9600 - maybe you need to add some extra parameters to begin, consult your specific board's documents if you have trouble.
  mp3.reset();          // Reset the device (optional, recommended)
}

void loop()
{
  // You should do more interesting stuff than just this...
  mp3.next();
  while(mp3.busy()); // Wait until finished.
}
</pre><h2>Troubleshooting </h2>
<p>People have problems in about this order...</p>
<ol type="1">
<li>Incorrectly wired, make sure that TX/RX crossover and that you have GND shared</li>
<li>Insufficient power supply. The power demands are not insignificant, USB from a computer... likely not good enough. Use external power.</li>
<li>Trying to upload to JQ8400 while it is still connected to the Arduino. Best to unplug the JQ8400 from your project and just have it plugged into a USB cable when you want to change the files on it.</li>
<li>MP3 file problem. Try re-encoding your MP3 files.</li>
</ol>
<h2>Further Documentation and Library Reference </h2>
<ul>
<li><a href="http://sparks.gogo.co.nz/jq8400/index.html">Complete Documentation about the JQ8400 Mp3 Player Module For Arduino</a></li>
<li><a href="class_j_q8400___serial.html">JQ8400_Serial Library Methods Reference</a> (with thanks to githack.com)</li>
</ul>
<h2>JQ6500 to JQ8400 Breaking Changes </h2>
<p>This section is for users of previous JQ6500 devices and the JQ6500_Serial library who are transitioning to a JQ8400 with <a class="el" href="class_j_q8400___serial.html">JQ8400_Serial</a> library.</p>
<p>As much as possible the <a class="el" href="class_j_q8400___serial.html">JQ8400_Serial</a> library should follow the same "api", with some additions, however there are some "breaking changes" you should be aware of...</p>
<ul>
<li>The initialisation has changed so that you can (must) point the JQ8400 library to a specific serial connection to the JQ8400 player, you can use SoftwareSerial, or any of your other serial ports (or any Stream). This enables you to use devices that do not support SoftwareSerial.</li>
</ul>
<p><b>Example for software serial on pins 8 and 9...</b></p>
<p>#include &lt;SoftwareSerial.h&gt; SoftwareSerial mySerial(8,9);</p>
<p>#include &lt;<a class="el" href="_j_q8400___serial_8h.html" title="Arduino Library for JQ8400 MP3 Module. ">JQ8400_Serial.h</a>&gt; <a class="el" href="class_j_q8400___serial.html">JQ8400_Serial</a> mp3(mySerial);</p>
<p>void setup() { mySerial.begin(9600); mp3.reset(); }</p>
<p><b>Example over microcontroller's default hardware serial port...</b></p>
<p>#include &lt;<a class="el" href="_j_q8400___serial_8h.html" title="Arduino Library for JQ8400 MP3 Module. ">JQ8400_Serial.h</a>&gt; <a class="el" href="class_j_q8400___serial.html">JQ8400_Serial</a> mp3;</p>
<p>void setup() { Serial.begin(9600); mp3.begin(Serial); }</p>
<p><b>Example over microcontroller's other hardware serial port...</b></p>
<p>#include &lt;<a class="el" href="_j_q8400___serial_8h.html" title="Arduino Library for JQ8400 MP3 Module. ">JQ8400_Serial.h</a>&gt; <a class="el" href="class_j_q8400___serial.html">JQ8400_Serial</a> mp3;</p>
<p>void setup() { Serial2.begin(9600); mp3.begin(Serial2); }</p>
<ul>
<li>JQ8400 does not support <code>countFolders()</code> at all (AFAIK) therefore this method is not available..</li>
<li>JQ8400 is not given a source for <code>countFiles</code> - that is use <code>mp3.countFiles()</code> not <code>mp3.countFiles(MP3_SRC_SDCARD)</code>, use <code>mp3.setSource(MP3_SRC_SDCARD)</code> to change the source before counting if you are not already on that source.</li>
<li>JQ8400 does not support MP3_EQ_BASS </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu May 9 2019 14:49:22 for JQ8400 MP3 Player Arduino Library by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
